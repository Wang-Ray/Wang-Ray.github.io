---
layout: post
title: "å®è·µSQLE"
categories: æ•°æ®åº“
tags: database SQLE
---

[sqle](https://github.com/actiontech/sqle)



## SQLE

æˆ‘æ¥å¸®æ‚¨æŸ¥çœ‹SQLEçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚

[2 tools called]

è®©æˆ‘è·å–ä¸€äº›æ ¸å¿ƒè¡¨çš„è¯¦ç»†ç»“æ„ï¼š

[2 tools called]

ä¸‹é¢æ˜¯SQLEç³»ç»Ÿçš„å®Œæ•´æ•°æ®åº“è¡¨ç»“æ„æ¦‚è§ˆï¼š

## ğŸ“Š SQLE æ•°æ®åº“è¡¨ç»“æ„

### ğŸ—„ï¸ SQLE æ•°æ®åº“ (sqle) - 70ä¸ªè¡¨

#### æ ¸å¿ƒä¸šåŠ¡è¡¨

| è¡¨å                 | è¯´æ˜       | ä¸»è¦å­—æ®µ                                                     |
| -------------------- | ---------- | ------------------------------------------------------------ |
| **workflows**        | å·¥ä½œæµ     | id, workflow_id, subject, desc, create_user_id, project_id, mode, exec_mode |
| **workflow_records** | å·¥ä½œæµè®°å½• | id, current_workflow_step_id, status                         |
| **workflow_steps**   | å·¥ä½œæµæ­¥éª¤ | -                                                            |
| **tasks**            | å®¡æ ¸ä»»åŠ¡   | id, instance_id, schema, pass_rate, score, audit_level, sql_source, db_type, status |
| **audit_plans_v2**   | å®¡æ ¸è®¡åˆ’   | id, instance_audit_plan_id, type, rule_template_name, params |
| **rule_templates**   | è§„åˆ™æ¨¡æ¿   | id, project_id, name, desc, db_type                          |
| **rules**            | å®¡æ ¸è§„åˆ™   | -                                                            |

#### SQLç®¡ç†ç›¸å…³

| è¡¨å               | è¯´æ˜        |
| ------------------ | ----------- |
| sql_manage_records | SQLç®¡ç†è®°å½• |
| sql_manage_queues  | SQLç®¡ç†é˜Ÿåˆ— |
| sql_audit_records  | SQLå®¡æ ¸è®°å½• |
| sql_whitelist      | SQLç™½åå•   |
| sql_versions       | SQLç‰ˆæœ¬     |

#### å®ä¾‹ä¸é…ç½®

| è¡¨å                 | è¯´æ˜         |
| -------------------- | ------------ |
| instances            | æ•°æ®åº“å®ä¾‹   |
| instance_audit_plans | å®ä¾‹å®¡æ ¸è®¡åˆ’ |
| custom_rules         | è‡ªå®šä¹‰è§„åˆ™   |
| tags                 | æ ‡ç­¾         |

---

### ğŸ—„ï¸ DMS æ•°æ®åº“ (dms) - 49ä¸ªè¡¨

DMS é¡¹ç›®ä½¿ç”¨ GORM è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œè¡¨ç»“æ„é€šè¿‡ Go ç»“æ„ä½“å®šä¹‰å¹¶è‡ªåŠ¨è¿ç§»ã€‚ä»¥ä¸‹æ˜¯æ‰€æœ‰æ•°æ®åº“è¡¨ç»“æ„çš„æ¦‚è§ˆï¼š

ç”±äºé…ç½®äº† `auto_migrate: true`ï¼ŒDMS å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»º/æ›´æ–°è¿™äº›è¡¨ç»“æ„ã€‚

#### ç”¨æˆ·æƒé™ç›¸å…³

| è¡¨å               | è¯´æ˜     | ä¸»è¦å­—æ®µ                                                    |
| ------------------ | -------- | ----------------------------------------------------------- |
| **users**          | ç”¨æˆ·     | uid, name, email, phone, password, stat, two_factor_enabled |
| **roles**          | è§’è‰²     | uid, name, description, stat                                |
| **members**        | é¡¹ç›®æˆå‘˜ | uid, user_uid, project_uid                                  |
| **op_permissions** | æ“ä½œæƒé™ | -                                                           |
| **user_groups**    | ç”¨æˆ·ç»„   | -                                                           |

#### é¡¹ç›®ä¸æ•°æ®æº

| è¡¨å             | è¯´æ˜            | ä¸»è¦å­—æ®µ                                                     |
| ---------------- | --------------- | ------------------------------------------------------------ |
| **projects**     | é¡¹ç›®            | uid, name, desc, business_tag_uid, status, priority          |
| **db_services**  | æ•°æ®åº“æœåŠ¡/å®ä¾‹ | uid, name, db_type, db_host, db_port, db_user, db_password, project_uid |
| environment_tags | ç¯å¢ƒæ ‡ç­¾        | -                                                            |
| business_tags    | ä¸šåŠ¡æ ‡ç­¾        | -                                                            |

#### ç³»ç»Ÿé…ç½®

| è¡¨å                  | è¯´æ˜       |
| --------------------- | ---------- |
| system_variables      | ç³»ç»Ÿå˜é‡   |
| dms_configs           | DMSé…ç½®    |
| login_configurations  | ç™»å½•é…ç½®   |
| ldap_configurations   | LDAPé…ç½®   |
| oauth2_configurations | OAuth2é…ç½® |
| smtp_configurations   | SMTPé…ç½®   |
| im_configurations     | IMé…ç½®     |

#### å·¥ä½œæµï¼ˆDMSå±‚ï¼‰

| è¡¨å             | è¯´æ˜       |
| ---------------- | ---------- |
| workflows        | å·¥ä½œæµ     |
| workflow_records | å·¥ä½œæµè®°å½• |
| workflow_steps   | å·¥ä½œæµæ­¥éª¤ |

---

### ğŸ“ æ ¸å¿ƒè¡¨ERå…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DMS æ•°æ®åº“                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  users â”€â”€â”¬â”€â”€ members â”€â”€â”€â”€ projects                          â”‚
â”‚          â”‚                   â”‚                              â”‚
â”‚          â””â”€â”€ user_groups     â”‚                              â”‚
â”‚                              â”‚                              â”‚
â”‚  roles â”€â”€ role_op_permissionsâ”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚                         db_services (æ•°æ®åº“å®ä¾‹)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SQLE æ•°æ®åº“                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  rule_templates â”€â”€â”€â”€ rules                                  â”‚
â”‚        â”‚                                                    â”‚
â”‚        â–¼                                                    â”‚
â”‚  audit_plans_v2 â”€â”€â”€â”€ audit_plan_reports_v2                  â”‚
â”‚        â”‚                                                    â”‚
â”‚        â–¼                                                    â”‚
â”‚  workflows â”€â”€â”€â”€ workflow_records â”€â”€â”€â”€ workflow_steps        â”‚
â”‚        â”‚                                                    â”‚
â”‚        â–¼                                                    â”‚
â”‚     tasks â”€â”€â”€â”€ execute_sql_detail                           â”‚
â”‚                                                             â”‚
â”‚  sql_manage_records (SQLç®¡ç†)                               â”‚
â”‚  sql_whitelist (ç™½åå•)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”‘ å…³é”®å­—æ®µè¯´æ˜

**é€šç”¨å­—æ®µï¼ˆå¤§å¤šæ•°è¡¨éƒ½æœ‰ï¼‰**:
- `id/uid` - ä¸»é”®
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´
- `deleted_at` - è½¯åˆ é™¤æ—¶é—´

**é¡¹ç›®å…³è”**:
- `project_id/project_uid` - å…³è”é¡¹ç›®

**çŠ¶æ€å­—æ®µ**:
- `status/stat` - çŠ¶æ€æ ‡è¯†
