---
layout: post
title: "实践Go"
date: 2019-04-08 11:08:00 +0800
categories: Go
tags: Go
---



main package

main函数



## 安装

下载解压，设置环境变量（GOROOT）即可完成安装。

```shell
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
```

设置go工作目录（GOPATH）

```shell
export GOPATH=~/GoProjects
PATH="$GOPATH/bin:$PATH"
```

工作目录结构

```shell
GoProjects$ tree -L 1
.
├── bin
├── pkg
└── src
```

src存放源代码，目录即为包（跟Java类似），pkg存放go编译生成的文件，bin存放安装后的可执行文件

## 快速开始

新建hello项目，项目结构如下：

```shell
GoProjects$ tree
.
├── bin
├── pkg
└── src
    └── ray.wang
        └── hello
            └── main.go

```

main.go

```
package main

import (
	"fmt"
)

func main() {
	fmt.Println("Hello World")
}
```

### 运行

```shell
$ go run main.go
```

### 安装

```shell
# 生成hello文件存放于bin目录
$ go install ray.wang/hello

$ hello
Hello World
```

### 跨平台编译

```shell
$ go env
GOARCH="amd64"
GOBIN=""
GOCACHE="/home/ray/.cache/go-build"
GOEXE=""
GOFLAGS=""
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/home/ray/GoProjects"
GOPROXY=""
GORACE=""
GOROOT="/home/ray/platform/go"
GOTMPDIR=""
GOTOOLDIR="/home/ray/platform/go/pkg/tool/linux_amd64"
GCCGO="gccgo"
CC="gcc"
CXX="g++"
CGO_ENABLED="1"
GOMOD=""
CGO_CFLAGS="-g -O2"
CGO_CPPFLAGS=""
CGO_CXXFLAGS="-g -O2"
CGO_FFLAGS="-g -O2"
CGO_LDFLAGS="-g -O2"
PKG_CONFIG="pkg-config"
GOGCCFLAGS="-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build887930678=/tmp/go-build -gno-record-gcc-switches"
```

注意里面两个重要的环境变量`GOOS`和`GOARCH`,其中`GOOS`指的是目标操作系统，它的可用值为：

1. darwin
2. freebsd
3. linux
4. windows
5. android
6. dragonfly
7. netbsd
8. openbsd
9. plan9
10. solaris

一共支持10中操作系统。`GOARCH`指的是目标处理器的架构，目前支持的有：

1. arm
2. arm64
3. 386
4. amd64
5. ppc64
6. ppc64le
7. mips64
8. mips64le
9. s390x

```
GOOS=windows GOARCH=amd64 go build ray.wang/hello
```

### 获取远程包

获取

```shell
$ go get -v github.com/spf13/cobra/cobra
```

更新远程包

```shell
$ go get -u -v github.com/spf13/cobra/cobra
```

### 获取Gitlab私有包

设置私服地址http到git转换

```shell
$ git config --global url."git@git.flysnow.org:".insteadOf "http://git.flysnow.org/"
```



```shell
$ go get -v -insecure git.flysnow.org/hello
```



[Go语言中文网（Golang中文社区）](https://studygolang.com)

[Go语言环境搭建详解](https://www.flysnow.org/2017/01/05/install-golang.html)

[从Java到Golang快速入门](https://www.flysnow.org/2016/12/28/from-java-to-golang.html)

